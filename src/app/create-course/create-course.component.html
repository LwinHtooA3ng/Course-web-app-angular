<div class="container create-course my-4">

  <div>

    <!-- (ngSubmit)="f.form.valid && onSubmit()" -->
    <form *ngIf="!submitted && isLoggedIn && isModOrAdmin" name="form" class="submit-form"
       #f="ngForm" (ngSubmit)="f.form.valid && onSubmit()"  novalidate>

      <div class="form-group">
        <div>
          <div>
            <h4 class="mb-4 fw-normal">Create course</h4>
          </div>

          <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input [(ngModel)]="form.title" name="title" type="text" class="form-control" id="title"
              #title="ngModel" required>
            <small class="text-danger mb-2" *ngIf="title.errors && f.submitted">
              Title is required!
            </small>
          </div>

          <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea [(ngModel)]="form.description" name="description" class="form-control" id="description" rows="3"
              #description="ngModel"></textarea>
          </div>

          <!-- <div class="mb-3">
            <label for="formFileSm" class="form-label">Course image</label>
            <div>
              <input [(ngModel)]="form.image" (change)="selectFile($event)" class="form-control form-control-sm"
                id="formFileSm" type="file" name="image" #image="ngModel" required>
            </div>
            <div class="mt-3">
                <img [src]="preview" class="preview">
              </div>
            <small class="text-danger mb-2" *ngIf="image.errors && f.submitted">
              Image is required!
            </small>

          </div> -->

          <!-- mytest -->

          <div class="custom-dropzone" [multiple]="false" ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)" required>
            <ngx-dropzone-label>
              <div>
                <h5>Drag and drop course image</h5>
              </div>
            </ngx-dropzone-label>
            <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f"
              [removable]="true" (removed)="onRemove(f)">
            </ngx-dropzone-image-preview>
          </div>

          <div class="text-danger mb-3">
            <small>{{ imageMessage }}</small>
          </div>

          <button type="submit" class="btn btn-primary mt-2">Submit</button>
        </div>
      </div>

    </form>

    <div *ngIf="submitted" class="text-center my-5">
      <h5 class="mb-4">Your course was created.</h5>
      <!-- <a><button class="btn btn-dark me-3" style="background-color: #764AF1; border: none;" (click)="newTutorial()">Add another tutorial</button></a> -->
      <a routerLink=""><button class="btn btn-dark" style="background-color: #764AF1; border: none;">Go to
          home</button></a>
    </div>

    <div *ngIf="!isLoggedIn || !isModOrAdmin">
      <h3 class="text-muted text-center">You need to login admin or moderator account.</h3>
    </div>

  </div>

</div>
